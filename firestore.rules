/**
 * @file Overview
 * This ruleset configures access control for the Inox PriceCalc application's Firestore database.
 *
 * Core Philosophy:
 *  This ruleset provides public read access to item catalogs (`InoxItemCategory`, `InoxItem`, `UniversalSettings`) and restricts write access.
 *  Writes to the `scale_data` collection should be performed by a trusted server with appropriate service account credentials.
 *  There is no user-specific ownership, so no authentication is required for read operations.
 *
 * Data Structure:
 *  - /inox_item_categories/{inoxItemCategoryId}: Stores categories of stainless steel items.
 *  - /inox_items/{inoxItemId}: Stores specific stainless steel items with their specifications and pricing.
 *  - /universal_settings/{universalSettingsId}: Stores the universal cost and margin settings.
 *  - /scale_data/{scaleDataId}: Stores data captured from the live scale.
 *
 * Key Security Decisions:
 *  - Public read access for item catalogs and settings to allow for easy data retrieval without authentication.
 *  - No user listing is applicable since there is no user data.
 *  - Write operations for `scale_data` are allowed without authentication, assuming a trusted server-side process handles the actual data writing.
 *  - Write operations are not explicitly denied for item catalogs and settings, assuming that these are managed through the Firebase console or a backend process that does not rely on client-side writes.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read inox item categories. No write access is granted.
     * @path /inox_item_categories/{inoxItemCategoryId}
     * @allow (get, list): Anyone can read.
     * @deny (create, update, delete): No one can write directly to this collection.
     * @principle Public read access.  Write access is not explicitly denied, assuming backend management.
     */
    match /inox_item_categories/{inoxItemCategoryId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to read inox items. No write access is granted.
     * @path /inox_items/{inoxItemId}
     * @allow (get, list): Anyone can read.
     * @deny (create, update, delete): No one can write directly to this collection.
     * @principle Public read access.  Write access is not explicitly denied, assuming backend management.
     */
    match /inox_items/{inoxItemId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to read universal settings. No write access is granted.
     * @path /universal_settings/{universalSettingsId}
     * @allow (get, list): Anyone can read.
     * @deny (create, update, delete): No one can write directly to this collection.
     * @principle Public read access.  Write access is not explicitly denied, assuming backend management.
     */
    match /universal_settings/{universalSettingsId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to write scale data. Read access is public.
     * @path /scale_data/{scaleDataId}
     * @allow (get, list): Anyone can read.
     * @allow (create): Write access is open to allow writing from a trusted source.
     * @deny (update, delete): No updates or deletes allowed.
     * @principle Public read access and open write access for trusted sources.
     */
    match /scale_data/{scaleDataId} {
      allow get, list: if true;
      allow create: if true;
      allow update: if false;
      allow delete: if false;
    }
  }
}