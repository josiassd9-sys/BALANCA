/**
 * @file Overview
 * This ruleset governs access to the Inox PriceCalc application's data, focusing on
 * stainless steel item catalogs and real-time scale data.
 *
 * Core Philosophy:
 * This ruleset prioritizes open access to catalog data (items, categories, settings)
 * and secure, service-account-controlled access to real-time scale data. There is no user-specific data, so
 * no authentication is required for read operations. All writes are denied to the client
 * and MUST be performed by a trusted server environment using a service account.
 *
 * Data Structure:
 * - /inox_item_categories/{inoxItemCategoryId}: Categories of stainless steel items.
 * - /inox_items/{inoxItemId}: Specific stainless steel items.
 * - /universal_settings/{universalSettingsId}: Universal pricing settings.
 * - /scale_data/{scaleDataId}: Data from the live scale.
 *
 * Key Security Decisions:
 * - Catalog data (items, categories, settings) is publicly readable.
 * - All write access is denied to the client. Writes to `scale_data` must originate from a trusted server environment (e.g., Cloud Function) using a service account.
 * - No user-specific data or ownership concepts are enforced, as the application is designed for public data.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Grants read access to inox item categories and denies all writes.
     * @path /inox_item_categories/{inoxItemCategoryId}
     * @allow (get, list): Any user can read item categories.
     * @deny (create, update, delete): No user can create, update, or delete item categories. These operations must be performed by a trusted server.
     * @principle Allows public read access to item categories.
     */
    match /inox_item_categories/{inoxItemCategoryId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Grants read access to inox items and denies all writes.
     * @path /inox_items/{inoxItemId}
     * @allow (get, list): Any user can read inox items.
     * @deny (create, update, delete): No user can create, update, or delete inox items. These operations must be performed by a trusted server.
     * @principle Allows public read access to inox items.
     */
    match /inox_items/{inoxItemId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Grants read access to universal settings and denies all writes.
     * @path /universal_settings/{universalSettingsId}
     * @allow (get, list): Any user can read universal settings.
     * @deny (create, update, delete): No user can create, update, or delete universal settings. These operations must be performed by a trusted server.
     * @principle Allows public read access to universal settings.
     */
    match /universal_settings/{universalSettingsId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Denies all access to scale data from the client. Writes to this collection must originate from a trusted server environment (e.g., Cloud Function) using a service account.
     * @path /scale_data/{scaleDataId}
     * @allow (get, list): Not Applicable.
     * @deny (create, update, delete): All operations are denied for a client.
     * @principle Secure the live scale data to only be updated from backend.
     */
    match /scale_data/{scaleDataId} {
      allow get, list: if false;
      allow create, update, delete: if false;
    }

    /**
     * @description Denies access to the /pesagens/live document.
     * @path /pesagens/live
     * @allow (get): Not Applicable.
     * @deny (get): All operations are denied for a client.
     */
    match /pesagens/live {
      allow get: if false;
      allow list: if false;
      allow create, update, delete: if false;
    }
  }
}